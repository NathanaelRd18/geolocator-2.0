import os
import sys
import glob, codecs

def main():
	curdir = os.getcwd();
	filedir = curdir + "/sgm/*.sgm";
	filepath = glob.glob(filedir);
	with codecs.open("place.txt", 'w', encoding = 'UTF-8') as outfile:
		for filename in filepath:
			with codecs.open(filename, 'r', encoding = 'UTF-8') as infile:
				for line in infile.readlines():
					if (line.startswith("<Spatial") or line.startswith("<TEXT")):
						continue;
					l1 = line.find('<');
					l2 = line.find('>', l1);
					outfile.write(line[l1: l2+1] + '\n');
					while (line.find('<', l2) != -1):
						l2 = line.find('>', l1);
						outfile.write(line[l1: l2+1] + '\n');
if __name__=="__main__":
	main();